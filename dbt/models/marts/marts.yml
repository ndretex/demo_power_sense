version: 2

models:
  - name: fct_measurements_latest
    description: Latest available measurement per ukey, replacing the former ClickHouse materialized-view flow.
    columns:
      - name: ukey
        tests:
          - not_null: {}
          - unique: {}
      - name: version
        tests:
          - not_null: {}
      - name: ts
        tests:
          - not_null: {}

  - name: fct_ingestion_daily_coverage
    description: Daily ingestion coverage by source and metric, including a missing-day flag.
    columns:
      - name: data_day
        tests:
          - not_null: {}
      - name: source
        tests:
          - not_null: {}
      - name: metric
        tests:
          - not_null: {}
      - name: rows_ingested
        tests:
          - not_null: {}
      - name: has_data
        tests:
          - accepted_values:
              values: [0, 1]
      - name: is_missing_day
        tests:
          - accepted_values:
              values: [0, 1]
